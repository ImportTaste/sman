ssh:ed:
  do: exec
  command: ssh khcheung@edison.nersc.gov
ssh:co:
  do: exec
  command: ssh khcheung@cori.nersc.gov
mosh:co:
  do: exec
  command: mosh khcheung@cori<<host(01)>>-224.nersc.gov
ssh:go:
  do: exec
  command: ssh khcheung@gordita.physics.berkeley.edu
ssh:to:
  do: exec
  desc: ssh to Tostada
  command: ssh khcheung@tostada1.physics.berkeley.edu
ssh:bolo:
  do: exec
  desc: ssh to bolowiki
  command: ssh khcheung@bolowiki.berkeley.edu
ssh:sp:
  do: exec
  desc: ssh to Stampede from XSEDE
  command: ssh tg839817@stampede.tacc.xsede.org
ssh:xd:
  do: exec
  command: ssh -l khcheung login.xsede.org
gsisp:
  do: exec
  command: gsissh stampede

# ssh/mosh for private ip
lpc:
  do: exec
  desc: connect to lpc
  command: <<command(ssh,mosh)>> kolen@<<host(128.32.117.125,172.22.2.7)>>
3650:
  do: exec
  desc: connect to 3650
  command: <<command(ssh,mosh)>> kolen@<<host(128.32.117.119,172.22.2.5)>>
icsx:
  do: exec
  desc: connect to icsx
  command: <<command(ssh,mosh)>> kolen@<<host(2607:f140:2:0:8644:65db:6121:ab01,172.22.2.2)>>
server:
  do: exec
  desc: connect to server
  command: <<command(ssh,mosh)>> kolen@<<host(192.168.1.116,172.22.2.8)>>
desktop:
  do: exec
  desc: connect to desktop
  command: <<command(ssh,mosh)>> kolen@<<host(192.168.1.100,172.22.2.3)>>
mbp:
  do: exec
  desc: connect to mbp
  command: <<command(ssh,mosh)>> kolen@<<host(192.168.1.104,172.22.2.4)>>
ucbcmb:
  do: exec
  desc: connect to ucbcmb
  command: ssh ucbcmb@128.32.124.219


ssh:tunnel:
  do: exec
  desc: tunnel a port from client to server.
  command: ssh -N -<<direction(L,R)#R to reverse>> localhost:<<port(8080,8989,8096,52698)#8080-snakeviz; 8989-Juptyer; 8096-emby; 52698-rmate.>>:localhost:<<port>> <<URL(khcheung@cori.nersc.gov,khcheung@edison.nersc.gov,khcheung@gordita.physics.berkeley.edu)>>

ssh:co:sqs:
  do: exec
  command: ssh khcheung@cori.nersc.gov sqs
ssh:ed:sqs:
  do: exec
  command: ssh khcheung@edison.nersc.gov '/usr/common/software/python/3.6-anaconda-4.4/bin/python -E /usr/common/software/bin/sqs'

rsync:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<inDir>> <<outDir>>
rsync:to:co:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<inDir>> khcheung@cori.nersc.gov:<<outDir>>
rsync:fm:co:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore khcheung@cori.nersc.gov:<<inDir>> <<outDir>>
rsync:to:ed:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<inDir>> khcheung@edison.nersc.gov:<<outDir>>
rsync:fm:ed:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore khcheung@edison.nersc.gov:<<inDir>> <<outDir>>

rsync:to:go:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<inDir>> khcheung@gordita.physics.berkeley.edu:<<outDir>>
rsync:fm:go:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore khcheung@gordita.physics.berkeley.edu:<<inDir>> <<outDir>>

rsync:to:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<inDir>> <<host>>:<<outDir>>
rsync:fm:
  do: exec
  command: rsync -avmz <<DELETE( ,--delete)>> --stats -e ssh --cvs-exclude --exclude='.DS_Store' --exclude .git/ --exclude .gitignore <<host>>:<<inDir>> <<outDir>>

sshfs:co:
  do: exec
  command: sudo sshfs -o IdentityFile=~/.ssh/id_rsa,allow_other,defer_permissions,volname=cori khcheung@cori.nersc.gov:/ /mnt/cori/
sshfs:ed:
  do: exec
  command: sudo sshfs -o IdentityFile=~/.ssh/id_rsa,allow_other,defer_permissions,volname=edison khcheung@edison.nersc.gov:/ /mnt/edison/
sshfs:go:
  do: exec
  command: sudo sshfs -o IdentityFile=~/.ssh/id_rsa,allow_other,defer_permissions,volname=gordita khcheung@gordita.physics.berkeley.edu:/ /mnt/gordita/
sshfs:lpc:
  do: exec
  command: sudo sshfs -o IdentityFile=~/.ssh/id_rsa,allow_other,defer_permissions,volname=lpc kolen@172.22.2.7:/ /mnt/lpc/

sshfs:mkdir:
  do: exec
  command: sudo mkdir -p /mnt/<<host(cori,edison,gordita,lpc)>>/
sshfs:umount:
  do: exec
  command: sudo umount -f /mnt/<<host(cori,edison,gordita,lpc)>>/
sshfs:kill:
  do: exec
  command: sudo pkill -9 sshfs
sshfs:pgrep:
  do: exec
  desc: show running sshfs processes.
  command: pgrep -lf sshfs

ssh:key:
  do: exec
  desc: transfer ssh public key from local to remote
  command: cat ~/.ssh/id_rsa.pub | ssh <<user(kolen,khcheung)>>@<<host>> 'cat >> .ssh/authorized_keys'

# mount lpc
lpc:git:nfs:
  do: exec
  desc: mount NFS
  command: sudo mkdir -p /Volumes/git && sudo mount 128.32.117.125:/home/kolen/git /Volumes/git
lpc:raid:nfs:
  do: exec
  desc: mount NFS
  command: sudo mkdir -p /Volumes/raid24 && sudo mount 128.32.117.125:/mnt/raid24 /Volumes/raid24

# wakeonlan
wake:
  do: exec
  desc: wake on LAN
  command: |
    wakeonlan <<address(1c:1b:0d:ec:19:de)#1: lpc>> || wol <<address>>
